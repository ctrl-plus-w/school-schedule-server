{"version":3,"sources":["../src/index.js"],"names":["app","use","express","json","origin","server","ApolloServer","typeDefs","resolvers","context","isAuth","applyMiddleware","PORT","process","env","listen","console","log"],"mappings":";;;;AAAA;;AACA;;AACA;;AAEA;;AAEA;;;;AAEA,CAAC,YAAY;AACX,QAAMA,GAAG,GAAG,uBAAZ,CADW,CAGX;AACA;;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,mBAAK;AAAEG,IAAAA,MAAM,EAAE;AAAV,GAAL,CAAR,EANW,CAQX;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;AACA,QAAMC,MAAM,GAAG,IAAIC,iCAAJ,CAAiB;AAAEC,IAAAA,QAAQ,EAARA,iBAAF;AAAYC,IAAAA,SAAS,EAATA,kBAAZ;AAAuBC,IAAAA,OAAO,EAAEC;AAAhC,GAAjB,CAAf;AACAL,EAAAA,MAAM,CAACM,eAAP,CAAuB;AAAEX,IAAAA;AAAF,GAAvB,EArBW,CAuBX;;AACA,QAAMY,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACAZ,EAAAA,GAAG,CAACe,MAAJ,CAAWH,IAAX,EAAiB,MAAMI,OAAO,CAACC,GAAR,gBAAvB;AACD,CA1BD","sourcesContent":["import { ApolloServer } from 'apollo-server-express';\nimport express from 'express';\nimport cors from 'cors';\n\nimport isAuth from './middlewares/is-auth';\n\nimport { resolvers, typeDefs } from './graphql';\n\n(async () => {\n  const app = express();\n\n  // Middlewares\n  // app.use(morgan('dev'));\n  app.use(express.json());\n  app.use(cors({ origin: '*' }));\n\n  // TODO : [-] Handle user delete and destroy. (don't forget to fetch only records where deleted_at is null)\n\n  // TODO : [x] User is fetched at the beggining of each Mutation.\n  // TODO : [x] When creating something, verify if the unique fields aren't on the deleted_at fields.\n\n  // TODO : [x] Verify if { include: [...models] } is compulsary on queries.\n  // TODO : [x] Transform query with { where: { id: __ }} to findByPK.\n  // TODO : [x] Set permissions levels.\n  // TODO : [x] When deleting a label, verify if there isn't an event in the user's labels.\n  // TODO : [x] When deleting a subject, verify if there isn't an event in the user's subjects.\n\n  // Graphql\n  const server = new ApolloServer({ typeDefs, resolvers, context: isAuth });\n  server.applyMiddleware({ app });\n\n  // Start server.\n  const PORT = process.env.PORT || 5000;\n  app.listen(PORT, () => console.log(`App started.`));\n})();\n"],"file":"index.js"}