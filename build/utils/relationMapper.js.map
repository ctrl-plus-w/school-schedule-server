{"version":3,"sources":["../../src/utils/relationMapper.js"],"names":["getObjectWithUsers","object","toJSON","users","getUsers","userObject","user","subjects","getSubjects","role","getRole","labels","getLabels","eventObject","event","start","Date","toISOString","owner","getUser","label","getLabel","subject","getSubject","model","map"],"mappings":";;;;;;;;;;;AAAA;;;;;;;;AAEO,MAAMA,kBAAkB,GAAIC,MAAD,kDAC7BA,MAAM,CAACC,MAAP,EAD6B,GAE7B,oBAASD,MAAT,CAF6B;AAGhCE,EAAAA,KAAK,EAAE,MAAMC,QAAQ,CAACH,MAAD;AAHW,EAA3B;;;;AAMA,MAAMI,UAAU,GAAIC,IAAD,kDACrBA,IAAI,CAACJ,MAAL,EADqB,GAErB,oBAASI,IAAT,CAFqB;AAGxBC,EAAAA,QAAQ,EAAE,MAAMC,WAAW,CAACF,IAAD,CAHH;AAIxBG,EAAAA,IAAI,EAAE,MAAMC,OAAO,CAACJ,IAAD,CAJK;AAKxBK,EAAAA,MAAM,EAAE,MAAMC,SAAS,CAACN,IAAD;AALC,EAAnB;;;;AAQA,MAAMO,WAAW,GAAIC,KAAD,kDACtBA,KAAK,CAACZ,MAAN,EADsB,GAEtB,oBAASY,KAAT,CAFsB;AAGzBC,EAAAA,KAAK,EAAE,IAAIC,IAAJ,CAASF,KAAK,CAACZ,MAAN,GAAea,KAAxB,EAA+BE,WAA/B,EAHkB;AAIzBC,EAAAA,KAAK,EAAE,MAAMC,OAAO,CAACL,KAAD,CAJK;AAKzBM,EAAAA,KAAK,EAAE,MAAMC,QAAQ,CAACP,KAAD,CALI;AAMzBQ,EAAAA,OAAO,EAAE,MAAMC,UAAU,CAACT,KAAD;AANA,EAApB;;;;AASP,MAAMO,QAAQ,GAAG,MAAOG,KAAP,IAAiB;AAChC,QAAMJ,KAAK,GAAG,MAAMI,KAAK,CAACH,QAAN,EAApB;AACA,SAAOD,KAAK,GAAGpB,kBAAkB,CAACoB,KAAD,CAArB,GAA+B,IAA3C;AACD,CAHD;;AAKA,MAAMG,UAAU,GAAG,MAAOC,KAAP,IAAiB;AAClC,QAAMF,OAAO,GAAG,MAAME,KAAK,CAACD,UAAN,EAAtB;AACA,SAAOD,OAAO,GAAGtB,kBAAkB,CAACsB,OAAD,CAArB,GAAiC,IAA/C;AACD,CAHD;;AAKA,MAAMH,OAAO,GAAG,MAAOK,KAAP,IAAiB;AAC/B,QAAMlB,IAAI,GAAG,MAAMkB,KAAK,CAACL,OAAN,EAAnB;AACA,SAAOb,IAAI,GAAGD,UAAU,CAACC,IAAD,CAAb,GAAsB,IAAjC;AACD,CAHD;;AAKO,MAAMM,SAAS,GAAG,MAAOY,KAAP,IAAiB;AACxC,QAAMb,MAAM,GAAG,MAAMa,KAAK,CAACZ,SAAN,EAArB;AACA,SAAOD,MAAM,CAACc,GAAP,CAAWzB,kBAAX,CAAP;AACD,CAHM;;;;AAKA,MAAMU,OAAO,GAAG,MAAOc,KAAP,IAAiB;AACtC,QAAMf,IAAI,GAAG,MAAMe,KAAK,CAACd,OAAN,EAAnB;AACA,SAAOD,IAAI,GAAGT,kBAAkB,CAACS,IAAD,CAArB,GAA8B,IAAzC;AACD,CAHM;;;;AAKA,MAAMD,WAAW,GAAG,MAAOgB,KAAP,IAAiB;AAC1C,QAAMjB,QAAQ,GAAG,MAAMiB,KAAK,CAAChB,WAAN,EAAvB;AACA,SAAOD,QAAQ,CAACkB,GAAT,CAAazB,kBAAb,CAAP;AACD,CAHM;;;;AAKA,MAAMI,QAAQ,GAAG,MAAOoB,KAAP,IAAiB;AACvC,QAAMrB,KAAK,GAAG,MAAMqB,KAAK,CAACpB,QAAN,EAApB;AACA,SAAOD,KAAK,CAACsB,GAAN,CAAUpB,UAAV,CAAP;AACD,CAHM","sourcesContent":["import { getDates } from './date';\n\nexport const getObjectWithUsers = (object) => ({\n  ...object.toJSON(),\n  ...getDates(object),\n  users: () => getUsers(object),\n});\n\nexport const userObject = (user) => ({\n  ...user.toJSON(),\n  ...getDates(user),\n  subjects: () => getSubjects(user),\n  role: () => getRole(user),\n  labels: () => getLabels(user),\n});\n\nexport const eventObject = (event) => ({\n  ...event.toJSON(),\n  ...getDates(event),\n  start: new Date(event.toJSON().start).toISOString(),\n  owner: () => getUser(event),\n  label: () => getLabel(event),\n  subject: () => getSubject(event),\n});\n\nconst getLabel = async (model) => {\n  const label = await model.getLabel();\n  return label ? getObjectWithUsers(label) : null;\n};\n\nconst getSubject = async (model) => {\n  const subject = await model.getSubject();\n  return subject ? getObjectWithUsers(subject) : null;\n};\n\nconst getUser = async (model) => {\n  const user = await model.getUser();\n  return user ? userObject(user) : null;\n};\n\nexport const getLabels = async (model) => {\n  const labels = await model.getLabels();\n  return labels.map(getObjectWithUsers);\n};\n\nexport const getRole = async (model) => {\n  const role = await model.getRole();\n  return role ? getObjectWithUsers(role) : null;\n};\n\nexport const getSubjects = async (model) => {\n  const subjects = await model.getSubjects();\n  return subjects.map(getObjectWithUsers);\n};\n\nexport const getUsers = async (model) => {\n  const users = await model.getUsers();\n  return users.map(userObject);\n};\n"],"file":"relationMapper.js"}